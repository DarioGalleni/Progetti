<!doctype html>
<html lang="it">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<title>Dettaglio cliente - {{ $customer->first_name }} {{ $customer->last_name }}</title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
	<div class="container">
        <div class="row">
            <div class="col-12 d-flex justify-content-between  mt-5">
                <p class="text-center">Hotel Gemma del Mare
                    <br>Via Lungomare, 1
                    <br>84019 Scario (SA)
                    <br>Tel: +39 0974 999999
                    <br>Email: info@gemmadelmare.com
                </p>
                <img src="https://www.gemmadelmare.com/web/struttura/logogemmadelmare.svg" height="150px" alt="">
            </div>
        </div>
    </div>

    <div class="container mt-5">
        <div class="row">
            <div class="col-12">
            <h1>{{ $customer->first_name }} {{ $customer->last_name }}</h1>
                <h5 class="text-muted">Camera: <strong>{{ $customer->room }}</strong></h5>
            </div>
        </div>
    </div>

    <div class="container card">
        <div class="card-body row">
        <h5>Permanenza</h5>
        <div>
            <span>Arrivo</span>
            <span>{{ $customer->arrival_date ?? '-' }}</span>
        <div>
            <span>Partenza</span>
            <span>{{ $customer->departure_date ?? '-' }}</span>
        </div>
        <div>
            <span>Numero notti</span>
            <span>{{ $customer->nights ?? '-' }}</span>
        </div>
        <h5>Riepilogo costi</h5>
				<div><span>Costo totale soggiorno</span><span>{{ number_format($customer->total_stay_cost ?? 0, 2, ',', '.') }} €</span></div>
				<div><span>Imposta di soggiorno</span><span>{{ number_format($cityTax ?? 0, 2, ',', '.') }} €</span></div>
        </div>
        </div>

		<section class="section card">
			<div class="card-body">
				<h5>Riepilogo costi</h5>
				<div><span>Costo totale soggiorno</span><span>{{ number_format($customer->total_stay_cost ?? 0, 2, ',', '.') }} €</span></div>
				<div><span>Imposta di soggiorno</span><span>{{ number_format($cityTax ?? 0, 2, ',', '.') }} €</span></div>

				@if(!empty($additionalExpenses) && $additionalExpenses > 0)
					<div><span>Totale spese aggiuntive</span><span>{{ number_format($additionalExpenses, 2, ',', '.') }} €</span></div>
					<div class="mt-2">
						<strong>Dettaglio spese:</strong>
						<ul class="list-unstyled ms-3 mt-1">
							@foreach($customer->expenses as $expense)
								<li>{{ ucfirst(str_replace('_', ' ', $expense->expense_type)) }}: {{ number_format($expense->amount, 2, ',', '.') }} €</li>
							@endforeach
						</ul>
					</div>
				@endif

				<hr>
				<div><strong>Totale Complessivo</strong><strong>{{ number_format($grandTotal ?? 0, 2, ',', '.') }} €</strong></div>
				<div><span>Acconto versato</span><span class="text-danger">- {{ number_format($customer->down_payment ?? 0, 2, ',', '.') }} €</span></div>
				<div><strong>Saldo da pagare</strong><strong>{{ number_format($finalBalance ?? (($grandTotal ?? 0) - ($customer->down_payment ?? 0)), 2, ',', '.') }} €</strong></div>
			</div>
		</section>

		<footer class="mt-3 text-muted">
			<small>Pagina generata il {{ \Carbon\Carbon::now()->format('d/m/Y H:i') }}</small>
		</footer>
	</div>
</body>
</html>